[('src.orig/Browser/WebCore/platform/network/ekioh/ResourceHandleManager525.cpp',
  'src/Browser/WebCore/platform/network/ekioh/ResourceHandleManager525.cpp',
  'Index: src/Browser/WebCore/platform/network/ekioh/ResourceHandleManager525.cpp\n===================================================================\n--- src.orig/Browser/WebCore/platform/network/ekioh/ResourceHandleManager525.cpp\n+++ src/Browser/WebCore/platform/network/ekioh/ResourceHandleManager525.cpp\n@@ -783,6 +783,7 @@ void ResourceHandleManager::startJob()\n\nResourceHandle* job = cacheEntry->firstClient();\nResourceHandleInternal* d = job->getInternal();\n+    bool CheckProxy = true;\n\nint secureMode = atoi(getenv("http_secure_mode"));\nif (secureMode > 2) {\n@@ -791,6 +792,17 @@ void ResourceHandleManager::startJob()\nsecureMode = 0;\n}\n\n+    HTTPHeaderMap::const_iterator it =\n+        job->request().httpHeaderFields().find("transferMode.dlna.org");\n+    if (secureMode > 0 && it != job->request().httpHeaderFields().end()) {\n+      fprintf(stderr, "Allowing http access for DLNA image\\n");\n+      secureMode = 0;\n+    }\n+    if (it != job->request().httpHeaderFields().end()) {\n+      fprintf(stderr, "Don\'t use Proxy for DLNA image\\n");\n+      CheckProxy = false;\n+    }\n+\n// fprintf(stderr, "Set http secure mode to %d\\n", secureMode);\nif (secureMode != 0) {\n//http_secure_mode:\n@@ -871,8 +883,9 @@ void ResourceHandleManager::startJob()\n// https with server side certificate is ok\n//curl_easy_setopt(cacheEntry->handle(), CURLOPT_SSL_VERIFYPEER, 0);\n}\n-\n-    setProxy(cacheEntry);\n+    if (CheckProxy) {\n+      setProxy(cacheEntry);\n+    }\n\nKURL cookieUrl;\nif (d->m_url.isEmpty()) {\n@@ -966,6 +979,13 @@ void ResourceHandleManager::setProxy(con\nreturn;\n}\n\n+    HTTPHeaderMap::const_iterator it =\n+      request.httpHeaderFields().find("transferMode.dlna.org");\n+    if (it != request.httpHeaderFields().end()) {\n+      fprintf(stderr, "No proxy for http DLNA\\n");\n+      return;\n+    }\n+\n// Curl 7.18.3 doesn\'t have programatical way to set all the individual\n// proxy components (username, password etc.) so we have to construct\n// a proxy string from the components.')]