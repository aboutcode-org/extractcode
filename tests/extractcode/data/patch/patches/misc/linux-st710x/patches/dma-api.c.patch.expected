[('linux-orig/arch/sh/drivers/dma/dma-api.c',
  'linux/arch/sh/drivers/dma/dma-api.c',
  '--- linux-orig/arch/sh/drivers/dma/dma-api.c\n+++ linux/arch/sh/drivers/dma/dma-api.c\n@@ -388,8 +388,10 @@\nchan->flags |= DMA_TEI_CAPABLE;\n\ninit_waitqueue_head(&chan->wait_queue);\n+#ifdef CONFIG_SYSFS\ndma_create_sysfs_files(chan, info);\n-\t}\n+#endif\n+        }\n\nlist_add(&info->list, &registered_dmac_list);\n\n@@ -399,12 +401,14 @@\n\nvoid unregister_dmac(struct dma_info *info)\n{\n+#ifdef CONFIG_SYSFS\nunsigned int i;\n\nfor (i = 0; i < info->nr_channels; i++)\ndma_remove_sysfs_files(info->channels + i, info);\n+#endif\n\n-\tif (!(info->flags & DMAC_CHANNELS_CONFIGURED))\n+        if (!(info->flags & DMAC_CHANNELS_CONFIGURED))\nkfree(info->channels);\n\nlist_del(&info->list);')]