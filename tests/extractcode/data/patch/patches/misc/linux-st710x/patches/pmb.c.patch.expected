[('linux-2.6.23/arch/sh/mm/pmb.c.orig',
  'linux-2.6.23/arch/sh/mm/pmb.c',
  '--- linux-2.6.23/arch/sh/mm/pmb.c.orig\n+++ linux-2.6.23/arch/sh/mm/pmb.c\n@@ -465,16 +465,19 @@\nentry = ram_mapping->entries;\nflags = ram_mapping->flags;\n\n-\tfor (i=0; i<NR_PMB_ENTRIES-1; i++)\n-\t\t__clear_pmb_entry(i);\n-\n-\tdo {\n-\t\tentry = (struct pmb_entry*)(((unsigned long)entry) + c2uc);\n-\t\t__set_pmb_entry(entry->vpn, entry->ppn,\n-\t\t\t\tentry->flags | flags, entry->pos);\n-\t\tentry = entry->next;\n-\t} while (entry);\n-\n+        entry = (struct pmb_entry*)(((unsigned long)entry) + c2uc);\n+\n+        for (i=0; i<NR_PMB_ENTRIES-1; i++)\n+          if (i == entry->pos) {\n+            if (entry->vpn != 0) {\n+              __set_pmb_entry(entry->vpn, entry->ppn,\n+                              entry->flags | flags, entry->pos);\n+            }\n+          }\n+          else {\n+            __clear_pmb_entry(i);\n+          }\n+\n/* Flush out the TLB */\ni =  ctrl_inl(MMUCR);\ni |= MMUCR_TI;')]