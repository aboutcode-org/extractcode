[('linux-2.6.23/drivers/net/phy/phy_device.c.orig',
  'linux-2.6.23/drivers/net/phy/phy_device.c',
  "--- linux-2.6.23/drivers/net/phy/phy_device.c.orig\n+++ linux-2.6.23/drivers/net/phy/phy_device.c\n@@ -161,10 +161,20 @@\n\nphy_prepare_link(phydev, handler);\n\n+\t/* Make sure higher levels (i.e. Ethtool) returns link\n+\t   down before the PHY has been properly initialized. */\n+\tnetif_carrier_off(phydev->attached_dev);\n+\nphy_start_machine(phydev, NULL);\n\nif (phydev->irq > 0)\nphy_start_interrupts(phydev);\n+\telse\n+\t\t/* Make sure phy interrupts are used. Please verify\n+\t\t   that a correct interrupt number is specified in\n+\t\t   the setup functions of the board if this BUG has\n+\t\t   been triggered. */\n+\t\tBUG();\n\nreturn phydev;\n}\n@@ -671,8 +681,13 @@\nphydev->drv = phydrv;\n\n/* Disable the interrupt if the PHY doesn't support it */\n-\tif (!(phydrv->flags & PHY_HAS_INTERRUPT))\n+\tif (!(phydrv->flags & PHY_HAS_INTERRUPT)) {\n+\t\t/* Make sure phy interrupts are used. Please verify\n+\t\t   that the phy is registered before the MAC if this\n+\t\t   BUG has been triggered. */\n+\t\tBUG();\nphydev->irq = PHY_POLL;\n+\t}\n\nspin_lock_bh(&phydev->lock);\n")]