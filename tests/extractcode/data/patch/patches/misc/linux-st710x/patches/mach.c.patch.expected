[
  [
    "linux-2.6.23/arch/sh/boards/st/mb442/mach.c.org", 
    "linux-2.6.23/arch/sh/boards/st/mb442/mach.c", 
    [
      "--- linux-2.6.23/arch/sh/boards/st/mb442/mach.c.org", 
      "+++ linux-2.6.23/arch/sh/boards/st/mb442/mach.c", 
      "@@ -17,6 +17,9 @@", 
      "#include <asm/machvec.h>", 
      "#include <asm/irq-stb7100.h>", 
      "", 
      "+#define SYSCONF_BASE (0x19001000)", 
      "+#define SYSCONF_DEVICEID (SYSCONF_BASE + 0x000)", 
      "+", 
      "static void __iomem *mb442_ioport_map(unsigned long port, unsigned int size)", 
      "{", 
      "#ifdef CONFIG_BLK_DEV_ST40IDE", 
      "@@ -37,16 +40,45 @@", 
      "", 
      "static void __init mb442_init_irq(void)", 
      "{", 
      "+#ifdef CONFIG_SH_MOTOROLA_VIP19XX", 
      "+ \tunsigned long sysconf;", 
      "+ \tunsigned long chip_7109;", 
      "+\tunsigned int *addr = ioremap_nocache(SYSCONF_BASE, 0x100);", 
      "+", 
      "+\tsysconf = readl(addr);", 
      "+\tchip_7109 = (((sysconf >> 12) & 0x3ff) == 0x02c);", 
      "+\tiounmap(addr);", 
      "+#endif", 
      "/* enable individual interrupt mode for externals */", 
      "plat_irq_setup_pins(IRQ_MODE_IRQ);", 
      "", 
      "/* Set the ILC to route external interrupts to the the INTC */", 
      "/* Outputs 0-3 are the interrupt pins, 4-7 are routed to the INTC */", 
      "-\t/* Inputs sys-irq2 and 3 are unused (pulled high) */", 
      "+\t/* Inputs sys-irq2 and 3 are unused (pulled low) */", 
      "+#ifndef CONFIG_SH_MOTOROLA_VIP19XX", 
      "ilc_route_external(ILC_EXT_IRQ0, 4, 0);\t\t/* SMC Ethernet */", 
      "ilc_route_external(ILC_EXT_IRQ1, 5, 0);\t\t/* ATA */", 
      "ilc_route_external(ILC_EXT_IRQ2, 6, 0);\t\t/* Unused */", 
      "ilc_route_external(ILC_EXT_MDINT, 7, 0);\t/* STe100 PHY */", 
      "+#else", 
      "+\t/* Motorola boards:", 
      "+\t     ILC_EXT_IRQ0: ETH_IRQ~ (VIP1900 only)", 
      "+\t     ILC_EXT_IRQ1: NIM_IRQ~ (VIP1900 and VIP1900-9)", 
      "+\t     ILC_EXT_IRQ2: Not used", 
      "+\t     ILC_EXT_IRQ3: Not used", 
      "+\t     ILC_EXT_IRB_WAKEUP: Not used but connected to IR data", 
      "+\t     ILC_EXT_NMI: Not used", 
      "+\t     ILC_EXT_MDINT: MDINT~ (VIP1900-9 only)", 
      "+\t     ILC_EXT_LOWPOWEROUT: Not used", 
      "+\t*/", 
      "+\tilc_route_external(ILC_EXT_IRQ1, 5, 1);", 
      "+\tif (chip_7109) {", 
      "+\t\tilc_route_external(ILC_EXT_MDINT, 4, 1);", 
      "+\t}", 
      "+\telse {", 
      "+\t\tilc_route_external(ILC_EXT_IRQ0, 4, 1);", 
      "+\t}", 
      "+#endif", 
      "}", 
      "", 
      "void __init mb442_setup(char**);"
    ]
  ]
]