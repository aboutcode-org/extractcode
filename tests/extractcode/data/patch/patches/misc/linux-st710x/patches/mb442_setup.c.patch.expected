[
  [
    "linux-2.6.23/arch/sh/boards/st/mb442/setup.c.orig", 
    "linux-2.6.23/arch/sh/boards/st/mb442/setup.c", 
    [
      "--- linux-2.6.23/arch/sh/boards/st/mb442/setup.c.orig", 
      "+++ linux-2.6.23/arch/sh/boards/st/mb442/setup.c", 
      "@@ -23,18 +23,26 @@", 
      "#include <linux/lirc.h>", 
      "#include <asm/irl.h>", 
      "", 
      "-static int ascs[2] __initdata = { 2, 3 };", 
      "+static int ascs[2] __initdata = { 1 | (STASC_FLAG_NORTSCTS << 8), 2 | (STASC_FLAG_NORTSCTS << 8) };", 
      "", 
      "void __init mb442_setup(char** cmdline_p)", 
      "{", 
      "+#ifndef CONFIG_SH_MOTOROLA_VIP19XX", 
      "printk(\"STMicroelectronics STb7100 Reference board initialisation\\n\");", 
      "+#else", 
      "+ \tprintk(KERN_DEBUG \"Motorola VIP19xx board initialisation\\n\");", 
      "+#endif", 
      "", 
      "stx7100_early_device_init();", 
      "stb7100_configure_asc(ascs, 2, 0);", 
      "}", 
      "", 
      "static struct plat_stm_pwm_data pwm_private_info = {", 
      "-\t.flags\t\t= PLAT_STM_PWM_OUT1,", 
      "+#ifndef CONFIG_SH_MOTOROLA_VIP19XX", 
      "+\t.flags\t\t= PLAT_STM_PWM_OUT0,", 
      "+#else", 
      "+\t.flags\t\t= 0,", 
      "+#endif", 
      "};", 
      "", 
      "static struct plat_ssc_data ssc_private_info = {", 
      "@@ -57,6 +65,38 @@", 
      "},", 
      "};", 
      "", 
      "+static struct platform_device smsc_lan9117 = {", 
      "+\t.name\t\t= \"smc911x\",", 
      "+\t.id\t\t= -1,", 
      "+\t.num_resources\t= 4,", 
      "+\t.resource\t= (struct resource []) {", 
      "+\t\t{", 
      "+\t\t\t.flags = IORESOURCE_MEM,", 
      "+\t\t\t.start = 0x02000300,", 
      "+\t\t\t.end   = 0x02000300 + 0xff,", 
      "+\t\t},", 
      "+\t\t{", 
      "+\t\t\t.flags = IORESOURCE_IRQ,", 
      "+\t\t\t.start = IRL0_IRQ,", 
      "+\t\t\t.end   = IRL0_IRQ,", 
      "+\t\t},", 
      "+\t\t/* See end of \"drivers/net/smsc_911x/smsc9118.c\" file", 
      "+\t\t * for description of two following resources. */", 
      "+\t\t{", 
      "+\t\t\t.flags = IORESOURCE_IRQ,", 
      "+\t\t\t.name  = \"polarity\",", 
      "+\t\t\t.start = 0,", 
      "+\t\t\t.end   = 0,", 
      "+\t\t},", 
      "+\t\t{", 
      "+\t\t\t.flags = IORESOURCE_IRQ,", 
      "+\t\t\t.name  = \"type\",", 
      "+\t\t\t.start = 1,", 
      "+\t\t\t.end   = 1,", 
      "+\t\t},", 
      "+\t},", 
      "+};", 
      "+", 
      "static struct platform_device smc91x_device = {", 
      ".name\t\t= \"smc91x\",", 
      ".id\t\t= 0,", 
      "@@ -124,8 +164,8 @@", 
      "", 
      "static struct plat_stmmacphy_data phy_private_data = {", 
      ".bus_id = 0,", 
      "-\t.phy_addr = 14,", 
      "-\t.phy_mask = 1,", 
      "+\t.phy_addr = 31,", 
      "+\t.phy_mask = 0,", 
      ".interface = PHY_INTERFACE_MODE_MII,", 
      ".phy_reset = &mb442_phy_reset,", 
      "};", 
      "@@ -137,8 +177,8 @@", 
      ".resource\t= (struct resource[]) {", 
      "{", 
      ".name\t= \"phyirq\",", 
      "-\t\t\t.start\t= IRL3_IRQ,", 
      "-\t\t\t.end\t= IRL3_IRQ,", 
      "+\t\t\t.start\t= IRL0_IRQ,", 
      "+\t\t\t.end\t= IRL0_IRQ,", 
      ".flags\t= IORESOURCE_IRQ,", 
      "},", 
      "},", 
      "@@ -148,6 +188,7 @@", 
      "};", 
      "", 
      "static struct platform_device *mb442_devices[] __initdata = {", 
      "+\t&smsc_lan9117,", 
      "&smc91x_device,", 
      "&physmap_flash,", 
      "&mb442_phy_device,"
    ]
  ]
]