[('linux-2.6.23/arch/sh/boards/st/mb442/setup.c.orig',
  'linux-2.6.23/arch/sh/boards/st/mb442/setup.c',
  '--- linux-2.6.23/arch/sh/boards/st/mb442/setup.c.orig\n+++ linux-2.6.23/arch/sh/boards/st/mb442/setup.c\n@@ -23,18 +23,26 @@\n#include <linux/lirc.h>\n#include <asm/irl.h>\n\n-static int ascs[2] __initdata = { 2, 3 };\n+static int ascs[2] __initdata = { 1 | (STASC_FLAG_NORTSCTS << 8), 2 | (STASC_FLAG_NORTSCTS << 8) };\n\nvoid __init mb442_setup(char** cmdline_p)\n{\n+#ifndef CONFIG_SH_MOTOROLA_VIP19XX\nprintk("STMicroelectronics STb7100 Reference board initialisation\\n");\n+#else\n+ \tprintk(KERN_DEBUG "Motorola VIP19xx board initialisation\\n");\n+#endif\n\nstx7100_early_device_init();\nstb7100_configure_asc(ascs, 2, 0);\n}\n\nstatic struct plat_stm_pwm_data pwm_private_info = {\n-\t.flags\t\t= PLAT_STM_PWM_OUT1,\n+#ifndef CONFIG_SH_MOTOROLA_VIP19XX\n+\t.flags\t\t= PLAT_STM_PWM_OUT0,\n+#else\n+\t.flags\t\t= 0,\n+#endif\n};\n\nstatic struct plat_ssc_data ssc_private_info = {\n@@ -57,6 +65,38 @@\n},\n};\n\n+static struct platform_device smsc_lan9117 = {\n+\t.name\t\t= "smc911x",\n+\t.id\t\t= -1,\n+\t.num_resources\t= 4,\n+\t.resource\t= (struct resource []) {\n+\t\t{\n+\t\t\t.flags = IORESOURCE_MEM,\n+\t\t\t.start = 0x02000300,\n+\t\t\t.end   = 0x02000300 + 0xff,\n+\t\t},\n+\t\t{\n+\t\t\t.flags = IORESOURCE_IRQ,\n+\t\t\t.start = IRL0_IRQ,\n+\t\t\t.end   = IRL0_IRQ,\n+\t\t},\n+\t\t/* See end of "drivers/net/smsc_911x/smsc9118.c" file\n+\t\t * for description of two following resources. */\n+\t\t{\n+\t\t\t.flags = IORESOURCE_IRQ,\n+\t\t\t.name  = "polarity",\n+\t\t\t.start = 0,\n+\t\t\t.end   = 0,\n+\t\t},\n+\t\t{\n+\t\t\t.flags = IORESOURCE_IRQ,\n+\t\t\t.name  = "type",\n+\t\t\t.start = 1,\n+\t\t\t.end   = 1,\n+\t\t},\n+\t},\n+};\n+\nstatic struct platform_device smc91x_device = {\n.name\t\t= "smc91x",\n.id\t\t= 0,\n@@ -124,8 +164,8 @@\n\nstatic struct plat_stmmacphy_data phy_private_data = {\n.bus_id = 0,\n-\t.phy_addr = 14,\n-\t.phy_mask = 1,\n+\t.phy_addr = 31,\n+\t.phy_mask = 0,\n.interface = PHY_INTERFACE_MODE_MII,\n.phy_reset = &mb442_phy_reset,\n};\n@@ -137,8 +177,8 @@\n.resource\t= (struct resource[]) {\n{\n.name\t= "phyirq",\n-\t\t\t.start\t= IRL3_IRQ,\n-\t\t\t.end\t= IRL3_IRQ,\n+\t\t\t.start\t= IRL0_IRQ,\n+\t\t\t.end\t= IRL0_IRQ,\n.flags\t= IORESOURCE_IRQ,\n},\n},\n@@ -148,6 +188,7 @@\n};\n\nstatic struct platform_device *mb442_devices[] __initdata = {\n+\t&smsc_lan9117,\n&smc91x_device,\n&physmap_flash,\n&mb442_phy_device,')]