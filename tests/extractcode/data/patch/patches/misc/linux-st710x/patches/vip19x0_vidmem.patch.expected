[('linux-2.6.23.orig/arch/sh/kernel/setup.c',
  'linux-2.6.23/arch/sh/kernel/setup.c',
  'Index: linux-2.6.23/arch/sh/kernel/setup.c\n===================================================================\n--- linux-2.6.23.orig/arch/sh/kernel/setup.c\n+++ linux-2.6.23/arch/sh/kernel/setup.c\n@@ -136,14 +136,14 @@ static int __init early_parse_mem(char *\nearly_param("systemmemsize", early_parse_mem);\n\nunsigned long stapi_mem_size = CONFIG_VIP19XX_STAPI_MEMORY_SIZE;\n+unsigned long vip19xx_vidmem_size = 32768;\n\nstatic int __init early_parse_vidmem(char *p)\n{\n-\tunsigned long size;\n-\tsize = memparse(p, &p);\n+\tvip19xx_vidmem_size = memparse(p, &p);\n\n#ifndef CONFIG_CPU_SUBTYPE_STX7105\n-\tif (size > 0x8000) {\n+\tif (vip19xx_vidmem_size == 65536) {\nstapi_mem_size = CONFIG_VIP19XX_STAPI_MEMORY_SIZE_64MB;\n}\n#endif'),
 ('linux-2.6.23.orig/arch/sh/kernel/cpu/sh4/setup-stb7100.c',
  'linux-2.6.23/arch/sh/kernel/cpu/sh4/setup-stb7100.c',
  'Index: linux-2.6.23/arch/sh/kernel/cpu/sh4/setup-stb7100.c\n===================================================================\n--- linux-2.6.23.orig/arch/sh/kernel/cpu/sh4/setup-stb7100.c\n+++ linux-2.6.23/arch/sh/kernel/cpu/sh4/setup-stb7100.c\n@@ -25,6 +25,8 @@\n#include <asm/sci.h>\n#include <asm/irq-ilc.h>\n\n+extern unsigned long vip19xx_vidmem_size;\n+\nstatic unsigned long chip_revision, chip_7109, chip_5202=0;\nstatic struct sysconf_field *sys_cfg7_0;\n\n@@ -916,6 +918,19 @@ void __init stx7100_early_device_init(vo\ndevid = sysconf_read(sc);\nprintk(KERN_NOTICE "Chip version %ld.%ld\\n", (devid >> 4)+1, devid & 0xf);\nboot_cpu_data.cut_minor = devid & 0xf;\n+               if ( (boot_cpu_data.cut_major == 3) &&\n+\t\t     (boot_cpu_data.cut_minor == 4) &&\n+\t\t     (vip19xx_vidmem_size == 65536) ) {\n+\t\t  printk(KERN_NOTICE "Adjusting DDR memory delay for cut 3.4 CPUs with "\\\n+                         "64 MB video memory\\n");\n+\t\t  addr = ioremap_nocache(0x19000000, 0x01000000);\n+\t\t  // Set LMIPL_VID_DLL2_OFF_CMD=40 (dec) in SYS_CFG21\n+\t\t  writel(40<<9, addr + 0x1154);\n+\t\t  iounmap(addr);\n+\t\t}\n+\t\telse {\n+\t\t  printk(KERN_NOTICE "Using default DDR memory delay\\n");\n+\t\t}\n}\n\n/* Configure the ST40 RTC to source its clock from clockgenB.')]